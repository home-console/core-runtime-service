# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É–ª—É—á—à–µ–Ω–∏–π —è–¥—Ä–∞

> **–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2026-01-27  
> **–í–µ—Ä—Å–∏—è —è–¥—Ä–∞:** 0.2.0  
> **–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞:** [CORE_ANALYSIS.md](CORE_ANALYSIS.md)

---

## üìä –°–≤–æ–¥–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –ß–∞—Å—Ç–∏—á–Ω–æ | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
|-----------|------------|----------|----------------|
| **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ** | 3 | 0 | 1 |
| **–í–∞–∂–Ω—ã–µ** | 4 | 0 | 0 |
| **–°—Ä–µ–¥–Ω–∏–µ** | 4 | 0 | 0 |
| **–ò—Ç–æ–≥–æ** | 11 | 0 | 1 |

---

## üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. Graceful shutdown timeout

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –í `Config` –µ—Å—Ç—å –ø–æ–ª–µ `shutdown_timeout: int = 10`
- ‚úÖ –í `main.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `asyncio.wait_for(runtime.shutdown(), timeout=config.shutdown_timeout)`
- ‚úÖ –í `CoreRuntime.stop()` –¥–æ–±–∞–≤–ª–µ–Ω timeout –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ –ï—Å—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏ timeout
- ‚úÖ –ï—Å—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ timeout —Å–æ–±—ã—Ç–∏–π
- ‚úÖ `CoreRuntime.__init__()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π `config` –ø–∞—Ä–∞–º–µ—Ç—Ä

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/config.py:30` - –µ—Å—Ç—å `shutdown_timeout`
- `main.py:31` - –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è config –≤ CoreRuntime
- `core/runtime.py:141-185` - –º–µ—Ç–æ–¥ `stop()` —Å timeout

---

### 2. Health checks

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –ï—Å—Ç—å `MonitoringModule` —Å –º–µ—Ç–æ–¥–æ–º `health_endpoint()`
- ‚úÖ –ï—Å—Ç—å health checks –≤ `remote_services/remote_logger.py` –∏ `remote_metrics.py`
- ‚úÖ –ï—Å—Ç—å health endpoint –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, Client Manager)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `health_check()` –≤ `CoreRuntime`
- ‚úÖ –ï—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Storage, –º–æ–¥—É–ª–∏, –ø–ª–∞–≥–∏–Ω—ã)
- ‚úÖ –ï—Å—Ç—å HealthStatus enum (–ª–æ–∫–∞–ª—å–Ω–æ –≤ –º–µ—Ç–æ–¥–µ)
- ‚úÖ –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –∏ –¥–µ—Ç–∞–ª—è–º–∏

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `modules/monitoring/monitoring_module.py:53-66` - –µ—Å—Ç—å health_endpoint
- `core/remote_services/remote_logger.py:56-57` - –µ—Å—Ç—å health endpoint
- `core/runtime.py:187-240` - –º–µ—Ç–æ–¥ `health_check()`

---

### 3. –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –ï—Å—Ç—å `remote_metrics` –ø–ª–∞–≥–∏–Ω –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- ‚úÖ –ï—Å—Ç—å `MonitoringModule` —Å Prometheus –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –µ—Å—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, health_requests_total)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_metrics()` –≤ `CoreRuntime`
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –≤–∫–ª—é—á–∞—é—Ç: –ø–ª–∞–≥–∏–Ω—ã (total, started, states), –º–æ–¥—É–ª–∏ (total, list), —Å–µ—Ä–≤–∏—Å—ã (total), storage (available)

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/remote_services/remote_metrics.py` - –µ—Å—Ç—å remote metrics –ø–ª–∞–≥–∏–Ω
- `modules/monitoring/monitoring_module.py` - –µ—Å—Ç—å Prometheus –º–µ—Ç—Ä–∏–∫–∏
- `core/runtime.py:242-295` - –º–µ—Ç–æ–¥ `get_metrics()`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∏ –≤ `ServiceRegistry` –∏ `EventBus` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤, –æ—à–∏–±–æ–∫, —Å–æ–±—ã—Ç–∏–π) –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã - —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –±—É–¥—É—â–µ–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

### 4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Storage

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `transaction()` –≤ `StorageAdapter` (–±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `transaction()` –≤ `SQLiteAdapter` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π BEGIN/COMMIT/ROLLBACK
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `transaction()` –≤ `PostgreSQLAdapter` —á–µ—Ä–µ–∑ asyncpg.transaction()
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `transaction()` –≤ `Storage` –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `transaction_callback()` –≤ `Storage` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –¥–µ–ª–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π commit

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `adapters/storage_adapter.py` - –±–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥ transaction()
- `adapters/sqlite_adapter.py` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è SQLite
- `adapters/postgresql_adapter.py` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è PostgreSQL
- `core/storage.py` - –º–µ—Ç–æ–¥—ã transaction() –∏ transaction_callback()

---

## üü° –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 5. Timeout –¥–ª—è ServiceRegistry

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `call_with_timeout()` –≤ `ServiceRegistry`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `asyncio.wait_for()` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞–≤–∏—Å—à–∏—Ö –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `asyncio.TimeoutError` –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ timeout

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/service_registry.py:93-120` - –º–µ—Ç–æ–¥ `call_with_timeout()`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è timeout –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ - timeout –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —è–≤–Ω–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å timeout –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

---

### 6. –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –¥–æ –æ–¥–Ω–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä–∏—è - —Ç–æ–ª—å–∫–æ —è–≤–Ω–∞—è –ø–æ–º–µ—Ç–∫–∞ –≤ manifest
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ `inspect.getsource()` (–º–µ–¥–ª–µ–Ω–Ω–æ –∏ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)
- ‚úÖ –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `manifest.get("is_integration", False)` –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/plugin_manager.py:546-600` - —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `_detect_and_register_integration()`

---

### 7. Middleware/interceptors –¥–ª—è ServiceRegistry

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å `ServiceMiddleware` —Å –º–µ—Ç–æ–¥–∞–º–∏ `before_call()`, `after_call()`, `on_error()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `register_with_middleware()` –≤ `ServiceRegistry`
- ‚úÖ Middleware –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (before_call ‚Üí –≤—ã–∑–æ–≤ ‚Üí after_call –∏–ª–∏ on_error)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö middleware –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/service_registry.py:17-58` - –∫–ª–∞—Å—Å `ServiceMiddleware`
- `core/service_registry.py:53-95` - –º–µ—Ç–æ–¥ `register_with_middleware()`

---

### 8. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –í `ServiceRegistry.register()` –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `version` - –≤–µ—Ä—Å–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "service.v1")
- ‚úÖ –í `HttpRegistry.register()` –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `version` - –≤–µ—Ä—Å–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "/v1/endpoint")
- ‚úÖ –í `HttpEndpoint` –µ—Å—Ç—å –ø–æ–ª–µ `version` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ API
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ HTTP endpoints
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º deprecation: –ø–æ–ª–µ `deprecated` –≤ `HttpEndpoint` –∏ —Å–ª–æ–≤–∞—Ä—å `_deprecated` –≤ `ServiceRegistry`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `get_versions()`, `is_deprecated()`, `mark_deprecated()` –≤ `ServiceRegistry` –∏ `HttpRegistry`
- ‚úÖ Deprecated endpoints –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è –≤ OpenAPI —Å—Ö–µ–º–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é API (`docs/API_VERSIONING.md`)

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/service_registry.py:76-102` - –º–µ—Ç–æ–¥ `register()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `version`
- `core/service_registry.py:256-310` - –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ä—Å–∏—è–º–∏ –∏ deprecation
- `core/http_registry.py:42-91` - –º–µ—Ç–æ–¥ `register()` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ—Ä—Å–∏–π
- `core/http_registry.py:12-28` - –∫–ª–∞—Å—Å `HttpEndpoint` —Å –ø–æ–ª—è–º–∏ `version` –∏ `deprecated`
- `core/http_registry.py:126-180` - –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ä—Å–∏—è–º–∏ –∏ deprecation
- `core/http_registry.py:221-230` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ deprecated –≤ OpenAPI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `docs/API_VERSIONING.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üü¢ –°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 9. Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Storage

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `batch_set()` –≤ `StorageAdapter`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `batch_set()` –≤ `SQLiteAdapter` —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ executemany
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `batch_set()` –≤ `PostgreSQLAdapter` —á–µ—Ä–µ–∑ asyncpg.executemany
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `batch_set()` –≤ `Storage` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `adapters/storage_adapter.py:103-118` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `batch_set()`
- `adapters/sqlite_adapter.py:192-207` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è SQLite
- `adapters/postgresql_adapter.py:186-197` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è PostgreSQL
- `core/storage.py:178-214` - –º–µ—Ç–æ–¥ `batch_set()` –≤ Storage

---

### 10. TTL –≤ StateEngine

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `set_with_ttl()` –≤ `StateEngine` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π —Å TTL
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–ª–æ–≤–∞—Ä—å `_ttl` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏—Å—Ç–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–π
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ TTL –ø—Ä–∏ `get()` - –∏—Å—Ç—ë–∫—à–∏–µ –∫–ª—é—á–∏ —É–¥–∞–ª—è—é—Ç—Å—è
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ `_cleanup_expired()` –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏—Å—Ç—ë–∫—à–∏—Ö –∫–ª—é—á–µ–π
- ‚úÖ –ó–∞–¥–∞—á–∞ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `set_with_ttl()`
- ‚úÖ –ó–∞–¥–∞—á–∞ –æ—á–∏—Å—Ç–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ –Ω–µ—Ç –∫–ª—é—á–µ–π —Å TTL

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/state_engine.py:26-35` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å TTL —Å–ª–æ–≤–∞—Ä—ë–º –∏ –∑–∞–¥–∞—á–µ–π –æ—á–∏—Å—Ç–∫–∏
- `core/state_engine.py:37-55` - –º–µ—Ç–æ–¥ `get()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π TTL
- `core/state_engine.py:70-88` - –º–µ—Ç–æ–¥ `set_with_ttl()` —Å –∑–∞–ø—É—Å–∫–æ–º –∑–∞–¥–∞—á–∏ –æ—á–∏—Å—Ç–∫–∏
- `core/state_engine.py:140-169` - —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ `_cleanup_expired()` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏

---

### 11. Hot-reload –ø–ª–∞–≥–∏–Ω–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `reload_plugin()` –≤ `PluginManager`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: stop ‚Üí unload ‚Üí reload module ‚Üí load ‚Üí start
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞ (–∑–∞–ø—É—â–µ–Ω/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω) –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
- ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è Python –º–æ–¥—É–ª—å —á–µ—Ä–µ–∑ `importlib.reload()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –º–∞–Ω–∏—Ñ–µ—Å—Ç –ø–ª–∞–≥–∏–Ω–∞ –∏–∑ —Ñ–∞–π–ª–∞
- ‚úÖ –ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏, –µ—Å–ª–∏ –±—ã–ª –∑–∞–ø—É—â–µ–Ω –¥–æ –Ω–µ—ë
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª–µ–π (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã)

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/plugin_manager.py:189-261` - –º–µ—Ç–æ–¥ `reload_plugin()`
- `core/plugin_manager.py:14-18` - –∏–º–ø–æ—Ä—Ç—ã (–≤–∫–ª—é—á–∞—è `sys` –¥–ª—è `sys.modules`)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Hot-reload —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑ manifest. –î–ª—è —É—Å–ø–µ—à–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `plugins/` —Å –≤–∞–ª–∏–¥–Ω—ã–º –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º (`plugin.json` –∏–ª–∏ `manifest.json`).

---

### 12. OpenAPI –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `generate_openapi()` –≤ `HttpRegistry`
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è OpenAPI 3.0.0 —Å—Ö–µ–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö endpoints
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö HTTP –º–µ—Ç–æ–¥–æ–≤ (GET, POST, PUT, PATCH, DELETE)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ tags –∏–∑ –ø—É—Ç–∏ –∏ –≤–µ—Ä—Å–∏–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è operationId –∏–∑ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ responses (200, 400, 500)
- ‚úÖ –î–ª—è POST/PUT/PATCH –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è requestBody
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ title, version, description, servers

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `core/http_registry.py:125-230` - –º–µ—Ç–æ–¥ `generate_openapi()`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°—Ö–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö endpoints. –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å FastAPI/Swagger –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Å—Ö–µ–º—É —á–µ—Ä–µ–∑ `app.openapi_schema` –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ JSON —Ñ–∞–π–ª.

---

## üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (4 –∑–∞–¥–∞—á–∏)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 3 –∑–∞–¥–∞—á–∏ (75%)
- ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 1 –∑–∞–¥–∞—á–∞ (25%)

### –í–∞–∂–Ω—ã–µ (4 –∑–∞–¥–∞—á–∏)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 4 –∑–∞–¥–∞—á–∏ (100%)

### –°—Ä–µ–¥–Ω–∏–µ (4 –∑–∞–¥–∞—á–∏)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 4 –∑–∞–¥–∞—á–∏ (100%)

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç (1-2 –Ω–µ–¥–µ–ª–∏)

1. **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å graceful shutdown timeout** –≤ `CoreRuntime.stop()`
   - –î–æ–±–∞–≤–∏—Ç—å timeout –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **–î–æ–±–∞–≤–∏—Ç—å health_check()** –≤ `CoreRuntime`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - HealthStatus enum
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ API

3. **–î–æ–±–∞–≤–∏—Ç—å get_metrics()** –≤ `CoreRuntime`
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø–ª–∞–≥–∏–Ω–æ–≤, –º–æ–¥—É–ª–µ–π, —Å–µ—Ä–≤–∏—Å–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MonitoringModule

4. **–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** –≤ Storage
   - –ú–µ—Ç–æ–¥ transaction() –≤ StorageAdapter
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ SQLite –∏ PostgreSQL –∞–¥–∞–ø—Ç–µ—Ä–∞—Ö
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

### –°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç (2-3 –Ω–µ–¥–µ–ª–∏)

5. **Timeout –¥–ª—è ServiceRegistry**
6. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**
7. **Middleware –¥–ª—è ServiceRegistry**
8. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API**

### –ë—É–¥—É—â–∏–µ —Å–ø—Ä–∏–Ω—Ç—ã

9. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Storage**
10. **TTL –≤ StateEngine**
11. **Hot-reload –ø–ª–∞–≥–∏–Ω–æ–≤**
12. **OpenAPI –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è**

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**
- ‚úÖ **11 –∑–∞–¥–∞—á –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã** (92%)
- ‚ùå **1 –∑–∞–¥–∞—á–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞** (8%)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
1. ‚úÖ Graceful shutdown timeout –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ CoreRuntime
2. ‚úÖ Health checks - –¥–æ–±–∞–≤–ª–µ–Ω —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π API –≤ CoreRuntime
3. ‚úÖ –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ - –¥–æ–±–∞–≤–ª–µ–Ω get_metrics() –≤ CoreRuntime
4. ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Storage - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–ª—è SQLite –∏ PostgreSQL
5. ‚úÖ Timeout –¥–ª—è ServiceRegistry - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ call_with_timeout()
6. ‚úÖ Middleware/interceptors –¥–ª—è ServiceRegistry - –¥–æ–±–∞–≤–ª–µ–Ω ServiceMiddleware –∏ register_with_middleware()
7. ‚úÖ –£–ø—Ä–æ—â–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –¥–æ –æ–¥–Ω–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä–∏—è (—Ç–æ–ª—å–∫–æ manifest)
8. ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å deprecation –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
9. ‚úÖ Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Storage - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–ª—è SQLite –∏ PostgreSQL
10. ‚úÖ TTL –≤ StateEngine - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π –∏—Å—Ç—ë–∫—à–∏—Ö –∫–ª—é—á–µ–π
11. ‚úÖ Hot-reload –ø–ª–∞–≥–∏–Ω–æ–≤ - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ reload_plugin() –≤ PluginManager
12. ‚úÖ OpenAPI –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ generate_openapi() –≤ HttpRegistry

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã:**
1. –û—Å—Ç–∞–ª–∞—Å—å –æ–¥–Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∞ (–Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ, –≤–æ–∑–º–æ–∂–Ω–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å).
