# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —è–¥—Ä–∞ Core Runtime

> **–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-XX  
> **–í–µ—Ä—Å–∏—è —è–¥—Ä–∞:** 0.2.0  
> **–°—Ç–∞—Ç—É—Å:** –î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–∞–Ω–∞–ª–∏–∑-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
3. [–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#–≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
4. [–û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è](#–æ–±–ª–∞—Å—Ç–∏-–¥–ª—è-—É–ª—É—á—à–µ–Ω–∏—è)
5. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–¥–æ—Ä–∞–±–æ—Ç–∫–µ)
6. [–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã](#–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã)

---

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

Core Runtime –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ "–≥–ª—É–ø–æ–≥–æ" —è–¥—Ä–∞** (dumb kernel):

1. **Plugin-First** ‚Äî –≤—Å—è –¥–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö/–º–æ–¥—É–ª—è—Ö
2. **–ò–∑–æ–ª—è—Ü–∏—è** ‚Äî –ø–ª–∞–≥–∏–Ω—ã –Ω–µ –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ
3. **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** ‚Äî –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –º–∏–Ω–∏–º—É–º –º–∞–≥–∏–∏
4. **Event-Driven** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ EventBus

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
CoreRuntime
‚îú‚îÄ‚îÄ EventBus          (pub/sub —Å–æ–±—ã—Ç–∏—è)
‚îú‚îÄ‚îÄ ServiceRegistry   (RPC –º–µ–∂–¥—É –ø–ª–∞–≥–∏–Ω–∞–º–∏)
‚îú‚îÄ‚îÄ StateEngine      (in-memory —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
‚îú‚îÄ‚îÄ Storage          (persistent key-value)
‚îú‚îÄ‚îÄ PluginManager    (lifecycle –ø–ª–∞–≥–∏–Ω–æ–≤)
‚îú‚îÄ‚îÄ ModuleManager    (lifecycle –º–æ–¥—É–ª–µ–π)
‚îú‚îÄ‚îÄ HttpRegistry     (HTTP –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
‚îî‚îÄ‚îÄ IntegrationRegistry (–∫–∞—Ç–∞–ª–æ–≥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π)
```

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

- **Core** ‚Äî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–µ –∑–Ω–∞–µ—Ç –æ –¥–æ–º–µ–Ω–∞—Ö
- **Modules** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã (devices, automation, presence)
- **Plugins** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, UI)

---

## üîç –ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. CoreRuntime (`core/runtime.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–ª—è REQUIRED –º–æ–¥—É–ª–µ–π (–Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç –±–µ–∑ –Ω–∏—Ö)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç graceful shutdown timeout** ‚Äî `stop()` –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å
- ‚ö†Ô∏è **–ù–µ—Ç health checks** ‚Äî —Å–ª–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ runtime
- ‚ö†Ô∏è **–ù–µ—Ç –º–µ—Ç—Ä–∏–∫** ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç observability
- ‚ö†Ô∏è **–ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –≤ start()** ‚Äî —Å–º–µ—à–∏–≤–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∑–∞–ø—É—Å–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def health_check() -> HealthStatus
- async def get_metrics() -> Dict[str, Any]
- shutdown_timeout –≤ Config
- –†–∞–∑–¥–µ–ª–∏—Ç—å init() –∏ start()
```

---

### 2. EventBus (`core/event_bus.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Pub/sub —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏ (asyncio.Lock)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫ (–æ–¥–∏–Ω –ø–æ–¥–ø–∏—Å—á–∏–∫ –Ω–µ –ª–æ–º–∞–µ—Ç –¥—Ä—É–≥–∏—Ö)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π API

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Ä—è–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏** ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚ö†Ô∏è **–ù–µ—Ç retry –º–µ—Ö–∞–Ω–∏–∑–º–∞** ‚Äî –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–±—ã—Ç–∏–µ —Ç–µ—Ä—è–µ—Ç—Å—è
- ‚ö†Ô∏è **–ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π** ‚Äî –≤—Å–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- ‚ö†Ô∏è **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ print** ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç logger_helper

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def publish_ordered(event_type, data)  # –ì–∞—Ä–∞–Ω—Ç–∏—è –ø–æ—Ä—è–¥–∫–∞
- async def subscribe_with_filter(event_type, handler, filter_func)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å logger_helper –¥–ª—è –æ—à–∏–±–æ–∫
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π retry –º–µ—Ö–∞–Ω–∏–∑–º
```

---

### 3. ServiceRegistry (`core/service_registry.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** RPC —Ä–µ–µ—Å—Ç—Ä —Å–µ—Ä–≤–∏—Å–æ–≤

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π API
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤** ‚Äî —Å–ª–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å API
- ‚ö†Ô∏è **–ù–µ—Ç middleware/interceptors** ‚Äî –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏
- ‚ö†Ô∏è **–ù–µ—Ç timeout –¥–ª—è –≤—ã–∑–æ–≤–æ–≤** ‚Äî –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å
- ‚ö†Ô∏è **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** ‚Äî –æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –≤ runtime

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def call_with_timeout(service_name, timeout, *args, **kwargs)
- async def register_with_middleware(service_name, func, middleware)
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: "service.v1.method"
- –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ type hints –∏–ª–∏ pydantic
```

---

### 4. Storage (`core/storage.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π API –¥–ª—è persistent storage

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π key-value –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ namespace –∏–∑–æ–ª—è—Ü–∏–∏
- ‚úÖ –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ (SQLite/PostgreSQL)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** ‚Äî —Å–ª–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ö†Ô∏è **–ù–µ—Ç batch –æ–ø–µ—Ä–∞—Ü–∏–π** ‚Äî –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- ‚ö†Ô∏è **–ù–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤** ‚Äî –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á—É
- ‚ö†Ô∏è **–ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def transaction(callback)  # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- async def batch_set(namespace, items: Dict[str, dict])
- async def query(namespace, filter_func)  # –ü—Ä–æ—Å—Ç–æ–π query API
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã
```

---

### 5. StateEngine (`core/state_engine.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** In-memory –∫—ç—à —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π API
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç TTL** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏—Å—Ç–µ–∫–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ö†Ô∏è **–ù–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è** ‚Äî –Ω–µ–ª—å–∑—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚ö†Ô∏è **–ù–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏** ‚Äî —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- ‚ö†Ô∏è **–ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** ‚Äî —Å–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def set_with_ttl(key, value, ttl_seconds)
- async def subscribe(key_pattern, callback)  # Watch API
- –ú–µ—Ç—Ä–∏–∫–∏: —Ä–∞–∑–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π
```

---

### 6. PluginManager (`core/plugin_manager.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ lifecycle –ø–ª–∞–≥–∏–Ω–æ–≤

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã (plugin.json)
- ‚úÖ –¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–ª–∞–≥–∏–Ω–æ–≤
- ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ inspect
- ‚ö†Ô∏è **–ù–µ—Ç hot-reload** ‚Äî –Ω–µ–ª—å–∑—è –æ–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–≥–∏–Ω –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- ‚ö†Ô∏è **–ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ** ‚Äî –æ–¥–∏–Ω –ø–ª–∞–≥–∏–Ω –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –≤—Å–µ
- ‚ö†Ô∏è **–ù–µ—Ç –º–µ—Ç—Ä–∏–∫** ‚Äî —Å–∫–æ–ª—å–∫–æ –ø–ª–∞–≥–∏–Ω–æ–≤, –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def reload_plugin(plugin_name)  # Hot reload
- async def get_plugin_metrics() -> Dict
- –ò–∑–æ–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç —Ñ–µ–π–ª–∏—Ç—å—Å—è
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ manifest)
```

---

### 7. ModuleManager (`core/module_manager.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ REQUIRED/OPTIONAL –º–æ–¥—É–ª–µ–π
- ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–ª—è REQUIRED –º–æ–¥—É–ª–µ–π
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (RemoteModuleManager)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ñ—ë—Å—Ç–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ BUILTIN_MODULES** ‚Äî —Å–ª–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –º–æ–¥—É–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
- ‚ö†Ô∏è **–ù–µ—Ç –º–µ—Ç—Ä–∏–∫** ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥—É–ª–µ–π
- ‚ö†Ô∏è **–ù–µ—Ç health checks** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–¥—É–ª—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def register_dynamic_module(module_class, required=False)
- async def get_module_health(module_name) -> HealthStatus
- –ú–µ—Ç—Ä–∏–∫–∏: –≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
```

---

### 8. StorageWithStateMirror (`core/storage_mirror.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Storage –∏ StateEngine

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (storage ‚Äî source of truth)
- ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –æ–±—ë—Ä—Ç–∫–∞

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç rollback –ø—Ä–∏ –æ—à–∏–±–∫–µ** ‚Äî state_engine –º–æ–∂–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è –≤ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- ‚ö†Ô∏è **–ù–µ—Ç –º–µ—Ç—Ä–∏–∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** ‚Äî —Å–ª–æ–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- ‚ö†Ô∏è **–ü—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π** ‚Äî `"{namespace}.{key}"` –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def sync_from_storage()  # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ storage
- async def check_consistency() -> bool
- –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º)
```

---

### 9. HttpRegistry (`core/http_registry.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä HTTP –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π API
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è endpoints
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Ç–µ–π

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API** ‚Äî —Å–ª–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- ‚ö†Ô∏è **–ù–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –ø–ª–∞–≥–∏–Ω–∞–º** ‚Äî —Å–ª–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å
- ‚ö†Ô∏è **–ù–µ—Ç OpenAPI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** ‚Äî —Ä—É—á–Ω–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- async def generate_openapi() -> Dict  # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: register_group(plugin_name, endpoints)
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: "/v1/endpoint"
```

---

### 10. IntegrationRegistry (`core/integration_registry.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–∞—Ç–∞–ª–æ–≥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –¥–ª—è admin API

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –§–ª–∞–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- ‚úÖ –°–≤—è–∑—å —Å PluginManager

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **In-memory —Ç–æ–ª—å–∫–æ** ‚Äî —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- ‚ö†Ô∏è **–ù–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚Äî –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω—É–∂–Ω—ã
- ‚ö†Ô∏è **–ù–µ—Ç —Å—Ç–∞—Ç—É—Å–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∞/–æ—Ç–∫–ª—é—á–µ–Ω–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å:
- status: IntegrationStatus (enabled/disabled/error)
- config_schema: Dict  # JSON Schema –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Storage
```

---

## üêõ –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ graceful shutdown timeout**
   - `stop()` –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞
   - –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

2. **–ù–µ—Ç health checks**
   - –°–ª–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ runtime
   - –ù–µ—Ç endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫**
   - –ù–µ—Ç observability
   - –°–ª–æ–∂–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

4. **–ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ Storage**
   - –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã
   - –†–∏—Å–∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### –í–∞–∂–Ω—ã–µ

5. **–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ `inspect`
   - –ú–µ–¥–ª–µ–Ω–Ω–æ –∏ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ

6. **–ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API**
   - ServiceRegistry –∏ HttpRegistry –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–µ—Ä—Å–∏–∏
   - –°–ª–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å API –±–µ–∑ breaking changes

7. **–ù–µ—Ç timeout –¥–ª—è –≤—ã–∑–æ–≤–æ–≤**
   - ServiceRegistry.call() –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å
   - –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

8. **–ù–µ—Ç middleware/interceptors**
   - –ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—é
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö

### –°—Ä–µ–¥–Ω–∏–µ

9. **–ù–µ—Ç batch –æ–ø–µ—Ä–∞—Ü–∏–π –≤ Storage**
   - –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

10. **–ù–µ—Ç TTL –≤ StateEngine**
    - –î–∞–Ω–Ω—ã–µ –Ω–µ –∏—Å—Ç–µ–∫–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    - –†–∏—Å–∫ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

11. **–ù–µ—Ç hot-reload –ø–ª–∞–≥–∏–Ω–æ–≤**
    - –ù–µ–ª—å–∑—è –æ–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–≥–∏–Ω –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

12. **–ù–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è StateEngine**
    - –ù–µ–ª—å–∑—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

## üöÄ –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

### 1. Observability

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- Health checks –¥–ª—è runtime –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)
- Structured logging
- Tracing (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π

---

### 2. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- Graceful shutdown —Å timeout
- Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Circuit breaker –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Storage

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π

---

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ë–∞–∑–æ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Storage
- Connection pooling –¥–ª—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π

---

### 4. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –•–æ—Ä–æ—à–∞—è –±–∞–∑–∞

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- Middleware/interceptors –¥–ª—è ServiceRegistry
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π
- Hot-reload –ø–ª–∞–≥–∏–Ω–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π

---

### 5. –£–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI –∏–∑ HttpRegistry
- Type hints –¥–ª—è –≤—Å–µ—Ö API
- –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ pydantic
- Dev tools (CLI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è runtime)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

1. **Graceful shutdown timeout**
   ```python
   # –í Config
   shutdown_timeout: int = 10
   
   # –í CoreRuntime.stop()
   async def stop(self) -> None:
       try:
           await asyncio.wait_for(self._stop_internal(), timeout=self.config.shutdown_timeout)
       except asyncio.TimeoutError:
           # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
   ```

2. **Health checks**
   ```python
   class HealthStatus(Enum):
       HEALTHY = "healthy"
       DEGRADED = "degraded"
       UNHEALTHY = "unhealthy"
   
   async def health_check(self) -> HealthStatus:
       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   ```

3. **–ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏**
   ```python
   class RuntimeMetrics:
       plugins_count: int
       services_count: int
       events_published: int
       # ...
   ```

---

### –§–∞–∑–∞ 2: –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

4. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Storage**
   ```python
   async def transaction(self, callback):
       async with self._adapter.transaction():
           return await callback(self)
   ```

5. **Timeout –¥–ª—è ServiceRegistry**
   ```python
   async def call_with_timeout(self, service_name, timeout, *args, **kwargs):
       return await asyncio.wait_for(
           self.call(service_name, *args, **kwargs),
           timeout=timeout
       )
   ```

6. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**
   - –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ manifest: `"is_integration": true`
   - –£–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

---

### –§–∞–∑–∞ 3: –°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (3-4 –Ω–µ–¥–µ–ª–∏)

7. **Middleware –¥–ª—è ServiceRegistry**
   ```python
   class ServiceMiddleware:
       async def before_call(self, service_name, args, kwargs):
           pass
       async def after_call(self, service_name, result):
           pass
   ```

8. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Storage**
   ```python
   async def batch_set(self, namespace, items: Dict[str, dict]):
       # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–∞—Å—Å–æ–≤–∞—è –∑–∞–ø–∏—Å—å
   ```

9. **TTL –≤ StateEngine**
   ```python
   async def set_with_ttl(self, key, value, ttl_seconds):
       # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ
   ```

---

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (—Å–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)

1. Graceful shutdown timeout
2. Health checks
3. –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Storage

### üü° –í–∞–∂–Ω—ã–µ (—Å–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç)

5. Timeout –¥–ª—è ServiceRegistry
6. –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
7. Middleware/interceptors
8. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—Ä–µ–º—è)

9. Hot-reload –ø–ª–∞–≥–∏–Ω–æ–≤
10. Batch –æ–ø–µ—Ä–∞—Ü–∏–∏
11. TTL –≤ StateEngine
12. OpenAPI –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–Ø–¥—Ä–æ Core Runtime –∏–º–µ–µ—Ç **—Å–æ–ª–∏–¥–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –æ—Å–Ω–æ–≤—É** —Å —á—ë—Ç–∫–∏–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–≤—è–∑–∞–Ω—ã —Å:

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º observability** ‚Äî –Ω–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏ health checks
2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é** ‚Äî –Ω–µ—Ç timeout'–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å—é** ‚Äî –Ω–µ—Ç middleware –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
1. –ù–∞—á–∞—Ç—å —Å –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π (–§–∞–∑–∞ 1)
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–§–∞–∑–∞ 2)
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–ª—É—á—à–∞—Ç—å —É–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–§–∞–∑–∞ 3)

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 6-9 –Ω–µ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [01-ARCHITECTURE.md](01-ARCHITECTURE.md) ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [04-CORE-RUNTIME-CONTRACT.md](04-CORE-RUNTIME-CONTRACT.md) ‚Äî –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã API
- [07-RUNTIME-MODULE-CONTRACT.md](07-RUNTIME-MODULE-CONTRACT.md) ‚Äî –ö–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–¥—É–ª–µ–π
- [08-PLUGIN-CONTRACT.md](08-PLUGIN-CONTRACT.md) ‚Äî –ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø–ª–∞–≥–∏–Ω–æ–≤
